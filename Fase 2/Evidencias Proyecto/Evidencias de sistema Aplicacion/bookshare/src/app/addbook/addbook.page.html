<ion-header class="fondo">
  <ion-toolbar>
    <ion-buttons slot="start">
      <ion-button routerLink="/tabs/home">
        <ion-icon slot="icon-only" name="arrow-back-outline"></ion-icon>
    </ion-button>
    </ion-buttons>
    <ion-title class="titulo">Agregar libro</ion-title>
  </ion-toolbar>
</ion-header>

<ion-content>
  <form (ngSubmit)="onSubmit()" #libroForm="ngForm">
    
    <!-- Campo para ISBN -->
    <ion-item>
      <div class="label-button-container">
        <ion-label position="stacked">ISBN</ion-label>
        <ion-button class="ejemplo" id="click-trigger">ejemplo</ion-button>
        <ion-popover cal trigger="click-trigger" triggerAction="click">
          <ng-template>
            <ion-content class="ion-padding">
              <ion-img src="assets/imagenes/isbn-ejemplo.png" alt=""></ion-img>
            </ion-content>
          </ng-template>
        </ion-popover>
      </div>
      <ion-input [(ngModel)]="isbn" name="isbn" placeholder="Ejemplo: 9123456789123" required></ion-input>
    </ion-item>
    <div class="aviso" *ngIf="libroForm.controls['isbn']?.invalid && (libroForm.controls['isbn']?.touched || libroForm.submitted)">
      <ion-label color="danger">El ISBN es obligatorio.</ion-label>
    </div>

    <!-- Campo para Título -->
    <ion-item>
      <ion-label position="stacked">Título</ion-label>
      <ion-input [(ngModel)]="titulo" name="titulo" placeholder="Ejemplo: El principito" required></ion-input>
    </ion-item>
    <div class="aviso" *ngIf="libroForm.controls['titulo']?.invalid && (libroForm.controls['titulo']?.touched || libroForm.submitted)">
      <ion-label color="danger">El título es obligatorio.</ion-label>
    </div>

    <!-- Campo para Autor -->
    <ion-item>
      <ion-label position="stacked" >Autor</ion-label>
      <ion-input [(ngModel)]="autor" name="autor" placeholder="Ejemplo: Pablo Neruda" required></ion-input>
    </ion-item>
    <div class="aviso" *ngIf="libroForm.controls['autor']?.invalid && (libroForm.controls['autor']?.touched || libroForm.submitted)">
      <ion-label color="danger">El autor es obligatorio.</ion-label>
    </div>

    <!-- Campo para Descripción -->
    <ion-item style="--ion-item-border-color: transparent;">
      <ion-label position="stacked" >Descripción</ion-label>
      <ion-textarea class="descripcion" [(ngModel)]="descripcion" name="descripcion" 
      placeholder="Ejemplo: En un mundo donde los sueños y la realidad se entrelazan, una joven ..." required></ion-textarea>
    </ion-item>
    <div class="aviso" *ngIf="libroForm.controls['descripcion']?.invalid && (libroForm.controls['descripcion']?.touched || libroForm.submitted)">
      <ion-label color="danger">La descripción es obligatoria.</ion-label>
    </div>

    <!-- Campo para Género -->
    <ion-item>
      <ion-label position="stacked">Género</ion-label>
      <ion-select class="opcion" placeholder="Seleccione una opción" [(ngModel)]="genero" name="genero" required>
        <ion-select-option value="Aventura">Aventura</ion-select-option>
        <ion-select-option value="Autoayuda">Autoayuda</ion-select-option>
        <ion-select-option value="Bibliografia y autobiografia">Bibliografía y autobiografía</ion-select-option>
        <ion-select-option value="Ciencia Ficción">Ciencia ficción</ion-select-option>
        <ion-select-option value="Comics y Novela grafica">Comics y novela gráfica</ion-select-option>
        <ion-select-option value="Divulgacion Cientifica">Divulgación científica</ion-select-option>
        <ion-select-option value="Drama">Drama</ion-select-option>
        <ion-select-option value="Educativo">Educativo</ion-select-option>
        <ion-select-option value="Ensayo">Ensayo</ion-select-option>
        <ion-select-option value="Fantasia">Fantasia</ion-select-option>
        <ion-select-option value="Ficción">Ficción</ion-select-option>
        <ion-select-option value="Ficcion Contemporanea">Ficción contemporánea</ion-select-option>
        <ion-select-option value="Historia">Historia</ion-select-option>
        <ion-select-option value="Historico">Histórico</ion-select-option>
        <ion-select-option value="Horror">Horror</ion-select-option>
        <ion-select-option value="Humor">Humor</ion-select-option>
        <ion-select-option value="Juvenil">Juvenil</ion-select-option>
        <ion-select-option value="Literatura clasica">Literatura clásica</ion-select-option>
        <ion-select-option value="Misterio">Misterio</ion-select-option>
        <ion-select-option value="Novela historica">Novela histórica</ion-select-option>
        <ion-select-option value="Poesia">Poesía</ion-select-option>
        <ion-select-option value="Policiaco">Policíaco</ion-select-option>
        <ion-select-option value="Psicologia">Psicología</ion-select-option>
        <ion-select-option value="Religioso y espiritual">Religioso y espiritual</ion-select-option>
        <ion-select-option value="Romance">Romance</ion-select-option>
        <ion-select-option value="Terror">Terror</ion-select-option>
        <ion-select-option value="Thriller">Thriller</ion-select-option>
        <ion-select-option value="Suspenso">Suspenso</ion-select-option>
      </ion-select>
    </ion-item>
    <div class="aviso" *ngIf="libroForm.controls['genero']?.invalid && (libroForm.controls['genero']?.touched || libroForm.submitted)">
      <ion-label color="danger">El género es obligatorio.</ion-label>
    </div>

    <!-- Campo para Imagen del Libro -->
    <ion-item style="--ion-item-border-color: transparent;">
      <ion-label position="stacked">Imagen del Libro</ion-label>
      <input class="foto" type="file" (change)="onFileSelected($event)" accept="image/*" required />
    </ion-item>
    <div class="aviso" *ngIf="!imagen_libro && (libroForm.controls['imagen_libro']?.touched || libroForm.submitted)">
      <ion-label color="danger">La imagen del libro es obligatoria.</ion-label>
    </div>

    <div *ngIf="imagen_libro">
      <img class="libro" [src]="imagen_libro" alt="Previsualización"/>
    </div>

    <ion-button expand="full" type="submit" [disabled]="libroForm.invalid || !imagen_libro">Agregar Libro</ion-button>
  </form>
</ion-content>
