<ion-app>
  <!-- Side Menu -->
  <ion-menu contentId="main-content" *ngIf="isLoggedIn">
    <ion-header>
      <ion-toolbar>
      </ion-toolbar>
    </ion-header>
    <ion-content class="menu">
      <ion-list>
        <ion-button (click)="goToProfile()">
          <ion-icon name="person-outline" slot="start"></ion-icon>
          Perfil cuenta
        </ion-button>

        <ion-button routerLink="/favoritos">
          <ion-icon name="star-outline" slot="start"></ion-icon>
          Lista de deseos
        </ion-button>

        <ion-button routerLink="/addbook" *ngIf="userRole === 'admin'">
          <ion-icon name="add-outline" slot="start"></ion-icon>
          Agregar libro admin
        </ion-button>

        <ion-button (click)="goAddBookuser()" *ngIf="userRole === 'usuario'">
          <ion-icon name="add-outline" slot="start"></ion-icon>
          Agregar libro
        </ion-button>

        <ion-button (click)="goIntercambio()" *ngIf="userRole === 'usuario'">
          <ion-icon name="add-outline" slot="start"></ion-icon>
          Intercambio
        </ion-button>
        <ion-button (click)="gochat()" *ngIf="userRole === 'usuario'">
          <ion-icon name="add-outline" slot="start"></ion-icon>
          Chat
        </ion-button>
        <ion-button (click)="goBookOwner()" *ngIf="userRole === 'usuario'">
          <ion-icon name="book-outline" slot="start"></ion-icon>
          Mis Libros
        </ion-button>

        <ion-button (click)="gosoliuser()" *ngIf="userRole === 'usuario'">
          <ion-icon name="book-outline" slot="start"></ion-icon>
          Prestamos
        </ion-button>

        <ion-button routerLink="/listar-libro">
          <ion-icon name="bookmark-outline" slot="start"></ion-icon>
          Lista de libros
        </ion-button>

        <ion-button (click)="solicitudesadd()" *ngIf="userRole === 'admin'">
          <ion-icon name="book-outline" slot="start"></ion-icon>
          SOLICITUDES LIBROS
        </ion-button>

        <ion-button class="cerrar" (click)="logout()">
          <ion-icon name="log-out-outline" slot="start"></ion-icon>
          Cerrar Sesi√≥n
        </ion-button>
      </ion-list>
    </ion-content>
    <br>
  </ion-menu>

  <div class="ion-page" id="main-content">
    <ion-header>
      <ion-toolbar>
        <ion-buttons slot="start">
          <ion-menu-button></ion-menu-button>
        </ion-buttons>
        <ion-button routerLink="/login" *ngIf="!isLoggedIn" class="login-button">
          <span class="login-text">
            <ion-icon name="person-outline" class="login-icon"></ion-icon>
          </span>
        </ion-button>
      </ion-toolbar>
    </ion-header>

    <ion-content style="--background: #ebe7e7;">
      <ion-card-header>
        <div class="foto-container" *ngIf="userProfile">
          <a [routerLink]="'/perfil'"> <!-- Redirige al perfil al hacer clic en la imagen -->
            <img *ngIf="userProfile.foto_perfil_base64"
              [src]="'data:image/jpeg;base64,' + userProfile.foto_perfil_base64" alt="Foto de perfil"
              class="profile-image" (click)="goToProfile()" />
          </a>

          <div class="welcome-message-container">
            <ion-title *ngIf="isLoggedIn" class="welcome-message">

            </ion-title>
          </div>
        </div>
      </ion-card-header>


      <div id="container">

        <div class="book-cover">
          <img class="banner-image" src="assets/imagenes/banner-02.jpg" alt="">
        </div>
        <ion-title class="recomendaciones">Recomendaciones</ion-title>

        <swiper-container [modules]="swiperModules" [slidesPerView]="3" [loop]="true" navigation pagination>
          <swiper-slide *ngFor="let book of books; let i = index" (click)="goToBookDetail(book.isbn)">
            <img *ngIf="book.imagen_libro" [src]="book.imagen_libro" alt="Libro {{ book.titulo }}" />
            <p>{{ book.titulo }}</p>
            <p>{{ book.autor }}</p>
            <div class="rating">
              <span *ngFor="let star of stars; let starIndex = index" class="star" (click)="rateBook(i, starIndex + 1)"
                [innerHTML]="starIndex < book.selectedRating ? '&#9733;' : '&#9734;'"></span>
            </div>
          </swiper-slide>
        </swiper-container>

        <br>
      </div>
    </ion-content>
  </div>
</ion-app>